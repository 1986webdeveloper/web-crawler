{% extends 'base.html' %}
{% load data %}
{% load static %}


{% block extrastyle %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}

/* The switch - the box around the slider */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* Toggle Button */
.on_off {
	-webkit-appearance: none;
	-webkit-tap-highlight-color: transparent;
	position: relative;
	border: 0;
	outline: 0;
	cursor: pointer;
	margin: 10px;
}

/* To create surface of toggle button */
.on_off:after {
	content: '';
	width: 60px;
	height: 28px;
	display: inline-block;
	background: rgba(196, 195, 195, 0.55);
	border-radius: 18px;
	clear: both;
}

/* Contents before checkbox to create toggle handle */
.on_off:before {
	content: '';
	width: 32px;
	height: 32px;
	display: block;
	position: absolute;
	left: 0;
	top: -3px;
	border-radius: 50%;
	background: rgb(255, 255, 255);
	box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
}

/* Shift the handle to left on check event */
.on_off:checked:before {
	left: 32px;
	box-shadow: -1px 1px 3px rgba(0, 0, 0, 0.6);
}
/* Background color when toggle button will be active */
.on_off:checked:after {
	background: #16a085;
}
.on_off,
.on_off:before,
.on_off:after,
.on_off:checked:before,
.on_off:checked:after {
	transition: ease .3s;
	-webkit-transition: ease .3s;
	-moz-transition: ease .3s;
	-o-transition: ease .3s;
}
a.paginate_button {
    padding: 10px;
    cursor: pointer;
    border: 1px solid #dee2e6;
    /* background: gray; */
    background-color: #fff;
    /* color: blue; */
}
a.current {
    background-color: blue;
    color: white;
}
a.disabled {
    color: gray;
    cursor: default;
}
a.disabled:hover {
    text-decoration:none;
}

</style>
    <link href="{% static 'ajax_datatable/css/style.css' %}" rel="stylesheet" />
    <!-- link rel='stylesheet' href="{% static 'datatables.net-bs/css/dataTables.bootstrap.min.css' %}" -->
    <link rel='stylesheet' href="{% static 'datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}">
    <link rel='stylesheet' href="{% static 'datatables.net-buttons-bs/css/buttons.bootstrap.min.css' %}">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.4/css/dataTables.bootstrap4.min.css">
{% endblock extrastyle %}

{% block extra_header %}
    <li class="nav-item">
        <a class="nav-link" href="{% url 'domain:dashboard' %}">My Reports</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'domain:add' %}">Generate New Report</a>
    </li>
{% endblock %}

{% block content %}

    <label style="font-size:22px;"><b>If you want generate report after 3 days click here</b></label>
    <div class="custom-control custom-switch">
        <input type="checkbox" class="on_off" value="True" id="new_chat_message_received">
        <input type="hidden" value="{{New_chat_message.is_enable}}" id="new_chat_message_received_">
    </div>
    <table id="datatable_permissions">
    </table>
{% endblock %}

{% block extrajs %}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="{% static 'ajax_datatable/js/utils.js' %}"></script>
    <script src="//cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

<script>
   $(document).on("change", ".on_off", function () {
         if ($(this).is(':checked')) {
            var flag = "True"
          } else {
            var flag = "False"
          }
         var id = $(this).attr('id');
            $.ajax({
                url: "/flag_data/",
                type: 'POST',
                headers: {"X-CSRFToken": "{{csrf_token}}"},
                data: {"id": id, "flag": flag},
                success: function (response) {
                },
            })
        });
    $(document).ready(function() {
        table = AjaxDatatableViewUtils.initialize_table(
            $('#datatable_permissions'),
            "{% url 'page_speed_insights:ajax_datatable_permissions' domain.id %}",
            {
                // extra_options (example)
                processing: false,
                autoWidth: false,
                full_row_select: true,
                scrollX: false
            },
        );
    });
</script>
{% endblock %}
